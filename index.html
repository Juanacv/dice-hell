<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
		<script type="text/javascript" src="js/jquery-3.5.0.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<style type="text/css">
			.col-md-2 {
				padding-top: 15px !important;
				padding-bottom: 15px !important;
			}
			.total-container {
				margin-top: 0.5em!important;
				margin-bottom: 0.5px !important;				
			}
			.hell {

			}
		</style>
		<title>Dice Hell!</title>
	</head>
	<body>
		<div class="container">
			<div class="jumbotron text-center hell">
				<h1 class="display-3">¡Infierno de dados!</h1>
			</div>		
			<div class="row">
				<div class="col-md-4">
				</div>
				<div class="col-md-4">
					<div class="form-group">
						<label for="diceType">Tipo de dado</label>
						<select class="form-control" id="diceType">
						  <option value="4">4</option>
						  <option value="6">6</option>
						  <option value="8">8</option>
						  <option value="10">10</option>
						  <option value="12">12</option>
						  <option value="20">20</option>
						  <option value="30">30</option>
						  <option value="60">60</option>
						  <option value="100">100</option>
						  <option value="120">120</option>
						</select>
					</div>		
					<div class="form-group">
						<label for="diceNumber">N&uacute;mero de dados</label>
						<input type="number" class="form-control" id="diceNumber" placeholder="N&uacute;mero de dados" min="1" max="256">
					</div>
					<button type="submit" class="btn btn-primary" id="roll">Submit</button>
				</div>
				<div class="col-md-4">
				</div>
			</div>
			<div class="row total-container">
				<div class="col-md-4">
				</div>			
				<div class="col-md-4">
					<label for="total"><b>Total:</b></label>
					<input type="text" id="total" class="form-control" value="0" readonly>
				</div>
				<div class="col-md-4">
				</div>				
			</div>
			<div class="row text-center" id="throwContainer">
								
			</div>
		</div>
		<script type="text/javascript">
			(function() {

				var $roll = document.getElementById('roll');
				
				function showThrow($throw) {
					var $throwContainer = document.getElementById('throwContainer'),
					$total = document.getElementById('total'),
					$totalInt = 0;
					//no me gusta usar variables globales en un funcion, pero...
					$roll.disabled = true;
					$roll.classList.remove("btn-primary");
					$roll.classList.add("btn-secondary");
					$throwContainer.innerHTML = '';
					$total.value = 0;
					
					for (var i = 0; i < $throw.length; i++) {
						$throwContainer.innerHTML = $throwContainer.innerHTML + '<div class="col-md-2"><div class="card"><h4>'+$throw[i]+'</h4></div></div>';	
						$totalInt += $throw[i];						
					}
					$total.value = $totalInt;
					$roll.classList.remove("btn-secondary");
					$roll.classList.add("btn-primary");	
					$roll.disabled = false;					
				}
				function rollDices() {
					var $diceSelect = document.getElementById('diceType'),
					$diceInput = document.getElementById('diceNumber'),
					$throw = [];
					
					var $diceType = parseInt($diceSelect.options[$diceSelect.selectedIndex].value,10);
					
					var $diceNumber = parseInt($diceInput.value,10);
	
					
					if (!isNaN($diceNumber) && !isNaN($diceType) && $diceNumber <= 256) {						
						for (var i = 0; i < $diceNumber; i++) {
							$throw.push(Math.floor(Math.random() * $diceType) + 1);
						}
					}
					else {
						alert("Inserte un número de dados igual o inferior a 256");
					}
					showThrow($throw);
				}
				
				$roll.addEventListener('click', rollDices);
				
			})();
		</script>		
	</body>
</html>